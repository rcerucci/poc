<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PatriGestor - Cadastro de Ativos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Cadastrar Novo Patrim√¥nio</h1>
            <div class="header-actions">
                <span class="badge">v2.0</span>
                <button class="btn-clear-all" id="btnLimparTudo">
                    üóëÔ∏è Limpar Tudo
                </button>
            </div>
        </header>

        <!-- Alert de Status -->
        <div id="alertBox" class="alert" style="display: none;"></div>

        <!-- Se√ß√£o de Upload de Fotos -->
        <section class="card">
            <h3>üì∏ Fotos do Ativo</h3>
            <p class="help-text">
                üí° <strong>Dica:</strong> Use <kbd>Ctrl+V</kbd> para colar imagens, 
                ou clique para selecionar arquivos. M√≠nimo 2 fotos.
            </p>
            
            <div class="photos-grid" id="photosGrid">
                <div class="photo-slot" data-index="1">
                    <input type="file" id="photo1" accept="image/*" capture="environment">
                    <label for="photo1">
                        <div class="photo-placeholder">
                            üì∑
                            <span>Foto 1</span>
                            <small>Clique ou Ctrl+V</small>
                        </div>
                    </label>
                    <img class="photo-preview" style="display: none;">
                    <button class="btn-remove" style="display: none;">‚úï</button>
                </div>
                
                <div class="photo-slot" data-index="2">
                    <input type="file" id="photo2" accept="image/*" capture="environment">
                    <label for="photo2">
                        <div class="photo-placeholder">
                            üì∑
                            <span>Foto 2</span>
                            <small>Clique ou Ctrl+V</small>
                        </div>
                    </label>
                    <img class="photo-preview" style="display: none;">
                    <button class="btn-remove" style="display: none;">‚úï</button>
                </div>
                
                <div class="photo-slot" data-index="3">
                    <input type="file" id="photo3" accept="image/*" capture="environment">
                    <label for="photo3">
                        <div class="photo-placeholder">
                            üì∑
                            <span>Foto 3</span>
                            <small>Clique ou Ctrl+V</small>
                        </div>
                    </label>
                    <img class="photo-preview" style="display: none;">
                    <button class="btn-remove" style="display: none;">‚úï</button>
                </div>
                
                <!-- BOT√ÉO PROCESSAR -->
                <div class="photo-slot photo-slot-button">
                    <button class="btn-process-photos" id="processarEtapa1" disabled>
                        <span class="icon">ü§ñ</span>
                        <span class="text">Processar Imagens</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de Observa√ß√£o do Operador -->
        <section class="card" id="observacaoSection" style="display: none;">
            <h3>üí° Voc√™ conhece este equipamento?</h3>
            
            <p class="help-text" id="validacaoLLM">
                <!-- Preenchido ap√≥s processamento -->
            </p>
            
            <div class="observacao-container">
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="tipoObservacao" value="nao" checked>
                        <span class="radio-label">
                            <span class="radio-icon">‚ùå</span>
                            <span class="radio-text">N√£o sei</span>
                        </span>
                    </label>
                    
                    <label class="radio-option">
                        <input type="radio" name="tipoObservacao" value="suspeita">
                        <span class="radio-label">
                            <span class="radio-icon">ü§î</span>
                            <span class="radio-text">Acho que √©</span>
                        </span>
                    </label>
                    
                    <label class="radio-option">
                        <input type="radio" name="tipoObservacao" value="certeza">
                        <span class="radio-label">
                            <span class="radio-icon">‚úÖ</span>
                            <span class="radio-text">Tenho certeza</span>
                        </span>
                    </label>
                </div>
                
                <div class="input-group">
                    <label for="nomeEquipamento" class="input-label">Nome do Equipamento:</label>
                    <input 
                        type="text" 
                        id="nomeEquipamento" 
                        class="input-nome-equipamento"
                        placeholder="Ex: Cuba de Limpeza Ultrass√¥nica" 
                        maxlength="100"
                        disabled
                    >
                </div>
            </div>
        </section>
        
        <!-- Formul√°rio de Dados -->
        <section class="card" id="formSection" style="display: none;">
            <h3>üìã Dados do Patrim√¥nio</h3>
            <p class="help-text">
                üìù Revise os dados extra√≠dos pela IA antes de continuar.
            </p>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="numeroPatrimonio">Placa *</label>
                    <input type="text" id="numeroPatrimonio" placeholder="Digite ou use scanner">
                </div>

                <div class="form-group">
                    <label for="nomeProduto">Nome *</label>
                    <input type="text" id="nomeProduto" placeholder="Ex: Notebook">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="estado">Estado</label>
                    <select id="estado">
                        <option value="">Selecione</option>
                        <option value="Excelente">Excelente</option>
                        <option value="Bom">Bom</option>
                        <option value="Regular">Regular</option>
                        <option value="Ruim">Ruim</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="depreciacao">Deprecia√ß√£o</label>
                    <select id="depreciacao">
                        <option value="">Selecione</option>
                        <option value="Computadores e Inform√°tica">Computadores e Inform√°tica</option>
                        <option value="Ferramentas">Ferramentas</option>
                        <option value="Instala√ß√µes">Instala√ß√µes</option>
                        <option value="M√°quinas e Equipamentos">M√°quinas e Equipamentos</option>
                        <option value="M√≥veis e Utens√≠lios">M√≥veis e Utens√≠lios</option>
                        <option value="Ve√≠culos">Ve√≠culos</option>
                        <option value="Outros">Outros</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="centroCusto">Centro de Custo</label>
                    <select id="centroCusto">
                        <option value="">Selecione</option>
                        <option value="TI">TI</option>
                        <option value="Administrativo">Administrativo</option>
                        <option value="Operacional">Operacional</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="unidade">Unidade</label>
                    <select id="unidade">
                        <option value="">Selecione</option>
                        <option value="Unidade 1">Unidade 1</option>
                        <option value="Unidade 2">Unidade 2</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="descricao">Descri√ß√£o</label>
                <textarea id="descricao" rows="4" placeholder="Descri√ß√£o t√©cnica do ativo"></textarea>
            </div>

            <button class="btn-primary btn-block" id="validarEBuscarPreco">
                üîç Buscar Pre√ßo de Mercado
            </button>
        </section>

        <!-- Aviso de Cache -->
        <section class="card card-cache" id="cacheSection" style="display: none;">
            <h3>‚ö° Cota√ß√£o em Cache</h3>
            <p id="cacheInfo" class="cache-info">
                <!-- Preenchido dinamicamente -->
            </p>
            <div class="cache-actions">
                <button class="btn-secondary" id="usarCache">
                    ‚úÖ Usar Cota√ß√£o Salva
                </button>
                <button class="btn-secondary" id="buscarNova">
                    üîÑ Buscar Nova Cota√ß√£o
                </button>
            </div>
        </section>

        <!-- Produtos Encontrados -->
        <section class="card" id="produtosSection" style="display: none;">
            <h3>üõí Produtos Encontrados</h3>
            <p class="help-text" id="cotacaoInfo">
                <!-- Preenchido dinamicamente -->
            </p>
            
            <div id="produtosList" class="produtos-list">
                <!-- Preenchido dinamicamente -->
            </div>

            <div class="cotacao-actions">
                <button class="btn-primary btn-block" id="aceitarCotacao">
                    ‚úÖ Aceitar Cota√ß√£o e Continuar
                </button>
            </div>
        </section>

        <!-- Resultado Final -->
        <section class="card" id="resultSection" style="display: none;">
            <h3>‚úÖ Ativo Cadastrado com Sucesso!</h3>
            
            <div class="result-grid">
                <div class="result-section">
                    <h4>Identifica√ß√£o</h4>
                    <div id="resultIdentificacao"></div>
                </div>

                <div class="result-section">
                    <h4>Classifica√ß√£o</h4>
                    <div id="resultClassificacao"></div>
                </div>

                <div class="result-section">
                    <h4>Valores</h4>
                    <div id="resultValores"></div>
                </div>
            </div>

            <details class="json-details">
                <summary>üìã Ver JSON Completo</summary>
                <pre id="jsonOutput"></pre>
            </details>

            <div class="action-buttons">
                <button class="btn-secondary" id="exportarJSON">üíæ Exportar JSON</button>
                <button class="btn-primary" id="processarNovo">‚û°Ô∏è Processar Novo Ativo</button>
            </div>
        </section>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay" style="display: none;">
            <div class="loading-spinner"></div>
            <p id="loadingText">Processando...</p>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>